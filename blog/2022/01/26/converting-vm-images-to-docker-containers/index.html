<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Converting VM images to Docker containers | Andrew William Green, Ph.D. </title> <meta name="author" content="Andrew William Green"> <meta name="description" content="A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. "> <meta name="keywords" content="cybersecurity, privacy, publicy policy, academia, researcher, public speaker"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/prof_pic.jpg?98220756bd97fb5ae875e71b0fc1200b"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://andygreenphd.github.io/blog/2022/01/26/converting-vm-images-to-docker-containers/"> <script src="/assets/js/theme.js?a81d82887dd692e91686b43de4542f18"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="//"> Andrew William Green, Ph.D. </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">Home </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">Blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">CV </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">Publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/media_appearances/">Media Appearances </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Converting VM images to Docker containers</h1> <p class="post-meta"> Created on January 26, 2022 </p> <p class="post-tags"> <a href="/blog/2022"> <i class="fa-solid fa-calendar fa-sm"></i> 2022 </a>   ·   <a href="/blog/tag/container"> <i class="fa-solid fa-hashtag fa-sm"></i> Container</a>   <a href="/blog/tag/docker"> <i class="fa-solid fa-hashtag fa-sm"></i> Docker</a>   <a href="/blog/tag/ubuntu"> <i class="fa-solid fa-hashtag fa-sm"></i> Ubuntu</a>   <a href="/blog/tag/virtual-machine"> <i class="fa-solid fa-hashtag fa-sm"></i> Virtual machine</a>   <a href="/blog/tag/vm"> <i class="fa-solid fa-hashtag fa-sm"></i> VM</a>   ·   <a href="/blog/category/research"> <i class="fa-solid fa-tag fa-sm"></i> Research,</a>   <a href="/blog/category/tips"> <i class="fa-solid fa-tag fa-sm"></i> Tips</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p>I’m starting to experiment with Docker containers. From a pedagogical perspective, I see lots of opportunities to quickly and easily script environments to support hands-on lab objectives for my students. Being able to create a series of images, push them to a public Docker repo, and then store a Docker compose script in a Github repo for students to access and run as needed just seems like the way to go. Students can choose to run the lab environment locally, or they can stand up a cloud-based VM in AWS, Azure, Digital Ocean, Linode… you get the idea.</p> <p>I have a small library of existing VMs that may be useful, and I’m lazy enough that I don’t want to rebuild them from scratch as containers. I figured there has to be a way to convert VMs on my Win10 system to Docker containers, and there is. However, it is not a simple process and is time-consuming. I am documenting the steps I followed below, in the hopes that it can help someone else down the road, and for me to refer to in the future. A word of caution – I tested this by converting a Linux VM. I have not tested with a Windows VM, but my expectation is that the conversion process will still work.</p> <p>These instructions were pieced together from the following sources:</p> <ul> <li><a href="https://www.vinnie.work/blog/2021-03-19-virtualmachine-to-docker/" rel="external nofollow noopener" target="_blank">https://www.vinnie.work/blog/2021-03-19-virtualmachine-to-docker/</a></li> <li><a href="https://dannyda.com/2020/06/25/how-to-use-qemu-img-command-to-convert-between-vmdk-raw-qcow2-vdi-vhd-vhdx-formats-disk-images-qemu-img-create-snapshot-resize-etc/" rel="external nofollow noopener" target="_blank">https://dannyda.com/2020/06/25/how-to-use-qemu-img-command-to-convert-between-vmdk-raw-qcow2-vdi-vhd-vhdx-formats-disk-images-qemu-img-create-snapshot-resize-etc/</a></li> <li><a href="https://www.unixmen.com/run-kali-linux-2-0-in-docker-container/" rel="external nofollow noopener" target="_blank">https://www.unixmen.com/run-kali-linux-2-0-in-docker-container/</a></li> </ul> <p>My current environment is a Win10 Enterprise System with WSL and Ubuntu app installed.</p> <ul> <li>Open your Ubuntu app and jump into root by typing <code class="language-plaintext highlighter-rouge">su root</code> </li> <li>Fully update Ubuntu by typing <code class="language-plaintext highlighter-rouge">apt-get update &amp;&amp; apt-get upgrade</code> </li> <li>We will use qemu-img to convert the existing VM VDMK file to a RAW file for Docker use. Install qemu-img by typing <code class="language-plaintext highlighter-rouge">apt-get install qemu-utils</code> and accept all prompts</li> <li>Ubuntu automatically maps the Windows C partition for access. My VMs are in separate folders in the Windows partition located in c:\agreen\VMs To access that folder, I typed <code class="language-plaintext highlighter-rouge">cd /mnt/c/agreen\VMs</code> (NOTE: you will need to use the directory name on your system where you have your VMs stored)</li> <li>Next, you need to convert your existing VMDK to a raw file for further use. Prior to beginning the conversion process, I created a directory named container under the specific VM folder of the image I’m converting. I’ll use this folder to hold my conversion work product.</li> <li>Now you’re ready to convert the VMDK to a raw file. The syntax is <code class="language-plaintext highlighter-rouge">qemu-img convert -O raw &lt;source VMDK file&gt; &lt;destination&gt;</code>. In my case, I typed <code class="language-plaintext highlighter-rouge">qemu-img convert-O raw image.vdmk container/image.raw</code> (WARNING – This conversion process can take a while, depending on VMDK size)</li> <li>Once the conversion process is complete, you need to look at the partition table on the new RAW file in order to get details necessary to mount the file for further use. I typed <code class="language-plaintext highlighter-rouge">parted -s container/image.raw unit b print</code> to get the data I needed in order to mount the partition. Below is my output – yours may vary. The important thing to pick up is the value in the “Start” column for the boot sector. In my case, it was <strong>1045876</strong> </li> </ul> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-26-parted-480.webp 480w,/assets/img/2022-01-26-parted-800.webp 800w,/assets/img/2022-01-26-parted-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/2022-01-26-parted.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Sample output from the parted command </div> <ul> <li>Next, I had to mount the partition for use. I created a mount point by <code class="language-plaintext highlighter-rouge">typing mkdir /mnt/container</code> </li> <li>Next, I mounted the RAW file by typing <code class="language-plaintext highlighter-rouge">mount -o loop,ro,offset=1045876 container/image.raw /mnt/container</code> </li> <li>Next, I verified a successful mount by typing <code class="language-plaintext highlighter-rouge">ls /mnt/container</code> </li> </ul> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-26-ls-output-480.webp 480w,/assets/img/2022-01-26-ls-output-800.webp 800w,/assets/img/2022-01-26-ls-output-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/2022-01-26-ls-output.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Sample output from the ls command </div> <ul> <li>Now that we have access to the file system of the VM, we need to put the entire partition in a tarball. I did this by typing <code class="language-plaintext highlighter-rouge">tar -C /mnt/container -czf image.tar.gz container/.</code> (WARNING – this may take a while, depending on partition size)</li> <li>Now that we have the tarball, it’s time to import it into Docker. Ensure Docker is running on your system, then open a PowerShell terminal in Administrator mode and navigate to the container folder that has the tarball. The syntax to import the tarball into Docker is <code class="language-plaintext highlighter-rouge">docker import &lt;filename&gt; &lt;repository&gt;:&lt;tag&gt;</code>. In my case, I typed <code class="language-plaintext highlighter-rouge">docker import image.tar.gz demotest:1.0</code> (WARNING – this may take a while, depending on tarball size)</li> <li>Once the import process completes, type <code class="language-plaintext highlighter-rouge">docker images</code> to get details on your new Docker image that you’ll need to launch a new container.</li> </ul> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-26-docker-images-480.webp 480w,/assets/img/2022-01-26-docker-images-800.webp 800w,/assets/img/2022-01-26-docker-images-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/2022-01-26-docker-images.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Sample output from the docker images command </div> <ul> <li>Now you can start a new container from your docker image by typing <code class="language-plaintext highlighter-rouge">docker run -i -t &lt;image id&gt; &lt;commands&gt;</code>. Since this is a Linux-based image, I needed to launch the bash shell on startup. In my case, I typed <code class="language-plaintext highlighter-rouge">docker run -i -t 891dcfcad752 /bin/bash</code> </li> <li>Success! My container is now up and running, and I can move around as needed within the environment.</li> </ul> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-26-directory-480.webp 480w,/assets/img/2022-01-26-directory-800.webp 800w,/assets/img/2022-01-26-directory-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/2022-01-26-directory.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Directory listing from inside my container </div> <p>You can also look at the state of the image and container by using Docker Desktop:</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-26-docker-desktop-480.webp 480w,/assets/img/2022-01-26-docker-desktop-800.webp 800w,/assets/img/2022-01-26-docker-desktop-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/2022-01-26-docker-desktop.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Output from the "Images" tab inside Docker Desktop </div> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-26-docker-desktop-container-480.webp 480w,/assets/img/2022-01-26-docker-desktop-container-800.webp 800w,/assets/img/2022-01-26-docker-desktop-container-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/2022-01-26-docker-desktop-container.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Output from the “Containers/Apps” tab inside Docker Desktop showing a running container </div> <p>You can stop the container inside Docker Desktop by hovering over the container name and clicking the “stop” button, or you can use the <code class="language-plaintext highlighter-rouge">docker stop &lt;container_name&gt;</code> command. In my case, I typed <code class="language-plaintext highlighter-rouge">docker stop xenodochial_darwin</code></p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-26-docker-stop-480.webp 480w,/assets/img/2022-01-26-docker-stop-800.webp 800w,/assets/img/2022-01-26-docker-stop-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/2022-01-26-docker-stop.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Output from docker stop command </div> <p>The output of the container name after running the command is confirmation that the container has stopped running. You can also verify the container’s state in Docker Desktop as well.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/2022-01-26-docker-container-stopped-480.webp 480w,/assets/img/2022-01-26-docker-container-stopped-800.webp 800w,/assets/img/2022-01-26-docker-container-stopped-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/2022-01-26-docker-container-stopped.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Output from the “Containers/Apps” tab inside Docker Desktop showing a stopped container </div> <p>That’s it! We now have a VM image converted into a fully functional Docker container.</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/03/27/is-georgia-moving-to-hand-marked-paper-ballots-for-elections/">Is Georgia moving to hand-marked paper ballots for elections?</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/03/26/what-does-chatgpt-know-about-information-systems-accepted-for-publication-at-the-communications-of-the-ais/">What does ChatGPT Know about Information Systems?” accepted for publication at the Communications of the AIS</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/04/27/to-report-or-not-to-report-extending-protection-motivation-theory-to-vulnerability-discovery-and-disclosure-accepted-for-publication-at-computers-&amp;-security/">To report or not to report? Extending Protection Motivation Theory to Vulnerability Discovery and Disclosure” accepted for publication at Computers &amp; Security</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/02/10/importing-ova-into-amazon-aws/">Importing OVA into Amazon AWS</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2021/04/28/a-quick-analysis-of-georgia-hb-134-and-hb-156/">A quick analysis of Georgia HB 134 and HB 156</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2026 Andrew William Green. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Last updated: February 17, 2026. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?c8a01c11a92744d44b093fc3bda915df" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>